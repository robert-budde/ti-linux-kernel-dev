From 23539e00f7e36667e401cbc246665b08aab360ce Mon Sep 17 00:00:00 2001
From: Robert Budde <robert.budde@ing-budde.de>
Date: Mon, 23 Feb 2015 22:13:52 +0100
Subject: [PATCH] cape: ibb 00a0

Signed-off-by: Robert Budde <robert.budde@ing-budde.de>
---
 arch/arm/boot/dts/am335x-bone-ibb.dtsi | 81 ++++++++++++++++++++++++++++++++++
 1 file changed, 81 insertions(+)
 create mode 100644 arch/arm/boot/dts/am335x-bone-ibb.dtsi

diff --git a/arch/arm/boot/dts/am335x-bone-ibb.dtsi b/arch/arm/boot/dts/am335x-bone-ibb.dtsi
new file mode 100644
index 0000000..56eabf4
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-ibb.dtsi
@@ -0,0 +1,81 @@
+/*
+ * Copyright (C) 2015 IBB Robert Budde - http://www.ing-budde.de/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+&ocp {
+	P9_15_pinmux {
+		/* gpio1[16] */
+		status = "disabled";
+	};
+};
+
+/ {
+	gpio_keys {
+		compatible = "gpio-keys";
+		pinctrl-names = "default";
+		pinctrl-0 = <&P9_15_gpio_pu_pin>;
+
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		rtc_mfp@1 {
+			label = "rtc_mfp";
+			gpios = <&gpio1 16 GPIO_ACTIVE_HIGH>;
+			linux,code = <143>; /* System Wake Up */
+			gpio-key,wakeup;
+		};
+	};
+};
+
+&i2c2 {
+  /* overwrite clock freq */
+	clock-frequency = <400000>;
+
+	/* DS3232 RTC module */
+	rtc@68 {
+		compatible = "maxim,ds3231";
+		reg = <0x68>;
+	};
+
+  /* PCA9546 I2C multiplexer */
+  i2cmux@70 {
+    #address-cells = <1>;
+    #size-cells = <0>;
+    compatible = "nxp,pca9545";
+    reg = <0x70>;
+
+    i2c@0 {
+      #address-cells = <1>;
+      #size-cells = <0>;
+      compatible = "nxp,pca954x-bus";
+      reg = <0>;
+      deselect_on_exit;
+    };
+    i2c@1 {
+      #address-cells = <1>;
+      #size-cells = <0>;
+      compatible = "nxp,pca954x-bus";
+      reg = <1>;
+      deselect_on_exit;
+    };
+    i2c@2 {
+      #address-cells = <1>;
+      #size-cells = <0>;
+      compatible = "nxp,pca954x-bus";
+      reg = <2>;
+      deselect_on_exit;
+    };
+    i2c@3 {
+      #address-cells = <1>;
+      #size-cells = <0>;
+      compatible = "nxp,pca954x-bus";
+      reg = <3>;
+      deselect_on_exit;
+    };
+  };
+
+};
-- 
1.9.1

