From 6bcbaa3d977f5c42e029bbdb09ef83969ae95d64 Mon Sep 17 00:00:00 2001
From: Robert Budde <robert.budde@ing-budde.de>
Date: Fri, 29 May 2015 14:12:34 +0200
Subject: [PATCH] cape ibb

Signed-off-by: Robert Budde <robert.budde@ing-budde.de>
---
 arch/arm/boot/dts/am335x-bone-ibb.dtsi | 84 ++++++++++++++++++++++++++++++++++
 1 file changed, 84 insertions(+)
 create mode 100644 arch/arm/boot/dts/am335x-bone-ibb.dtsi

diff --git a/arch/arm/boot/dts/am335x-bone-ibb.dtsi b/arch/arm/boot/dts/am335x-bone-ibb.dtsi
new file mode 100644
index 0000000..729e1b0
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-ibb.dtsi
@@ -0,0 +1,84 @@
+/*
+ * Copyright (C) 2015 IBB Robert Budde - http://www.ing-budde.de/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+&ocp {
+  P9_15_pinmux {
+    /* gpio1[16] */
+    status = "disabled";
+  };
+};
+
+/ {
+  gpio_keys {
+    compatible = "gpio-keys";
+    pinctrl-names = "default";
+    pinctrl-0 = <&P9_15_gpio_pu_pin>;
+
+    #address-cells = <1>;
+    #size-cells = <0>;
+
+    rtc_mfp@1 {
+      label = "rtc_mfp";
+      gpios = <&gpio1 16 GPIO_ACTIVE_HIGH>;
+      linux,code = <143>; /* System Wake Up */
+      gpio-key,wakeup;
+    };
+  };
+
+  aliases {
+    i2c3 = &im0;
+    i2c4 = &im1;
+    i2c5 = &im2;
+    i2c6 = &im3;
+  };
+};
+
+&i2c2 {
+  /* overwrite clock freq */
+  clock-frequency = <400000>;
+
+  /* DS3232 RTC module */
+  rtc@68 {
+    compatible = "maxim,ds3231";
+    reg = <0x68>;
+  };
+
+  /* PCA9546 I2C multiplexer */
+  i2cmux@70 {
+    compatible = "nxp,pca9546";
+    #address-cells = <1>;
+    #size-cells = <0>;
+    reg = <0x70>;
+
+    im0: bus@0 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <0>;
+    };
+    im1: bus@1 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <1>;
+    };
+    im2: bus@2 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <2>;
+    };
+    im3: bus@3 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <3>;
+    };
+  };
+
+};
-- 
1.9.1

