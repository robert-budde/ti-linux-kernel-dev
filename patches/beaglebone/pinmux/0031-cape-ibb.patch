From 884d05e4f1ee86d5239cfba1e30605b1958d40fa Mon Sep 17 00:00:00 2001
From: Robert Budde <robert.budde@ing-budde.de>
Date: Sat, 28 Mar 2015 09:39:39 +0100
Subject: [PATCH] create ibb dtsi

---
 arch/arm/boot/dts/am335x-bone-ibb.dtsi | 81 ++++++++++++++++++++++++++++++++++
 1 file changed, 81 insertions(+)
 create mode 100644 arch/arm/boot/dts/am335x-bone-ibb.dtsi

diff --git a/arch/arm/boot/dts/am335x-bone-ibb.dtsi b/arch/arm/boot/dts/am335x-bone-ibb.dtsi
new file mode 100644
index 0000000..6cf7da4
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-bone-ibb.dtsi
@@ -0,0 +1,81 @@
+/*
+ * Copyright (C) 2015 IBB Robert Budde - http://www.ing-budde.de/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+&ocp {
+  P9_15_pinmux {
+    /* gpio1[16] */
+    status = "disabled";
+  };
+};
+
+/ {
+  gpio_keys {
+    compatible = "gpio-keys";
+    pinctrl-names = "default";
+    pinctrl-0 = <&P9_15_gpio_pu_pin>;
+
+    #address-cells = <1>;
+    #size-cells = <0>;
+
+    rtc_mfp@1 {
+      label = "rtc_mfp";
+      gpios = <&gpio1 16 GPIO_ACTIVE_HIGH>;
+      linux,code = <143>; /* System Wake Up */
+      gpio-key,wakeup;
+    };
+  };
+};
+
+&i2c2 {
+  /* overwrite clock freq */
+  clock-frequency = <400000>;
+
+  /* DS3232 RTC module */
+  rtc@68 {
+    compatible = "maxim,ds3231";
+    reg = <0x68>;
+  };
+
+  /* PCA9546 I2C multiplexer */
+  i2cmux@70 {
+    compatible = "nxp,pca9546";
+    #address-cells = <1>;
+    #size-cells = <0>;
+    reg = <0x70>;
+
+    bus@0 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <0>;
+      nxp,adapter-id = <0x3>;
+    };
+    bus@1 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <1>;
+      nxp,adapter-id = <0x4>;
+    };
+    bus@2 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <2>;
+      nxp,adapter-id = <0x5>;
+    };
+    bus@3 {
+      compatible = "nxp,pca954x-bus";
+      #address-cells = <1>;
+      #size-cells = <0>;
+      reg = <3>;
+      nxp,adapter-id = <0x6>;
+    };
+  };
+
+};
-- 
1.9.1

